const deck = [
	{
		name: 'Arashiyama',
		image: './images/Arashiyama.png',
		about:
			'Arashiyama becomes most attractive (and busy) around early April and the second half of November when the cherry blossom and fall color seasons usually peak (Click picture to read more)',
	},
	{
		name: 'Daigoji',
		image: './images/Daigoji.png',
		about:
			'Daigoji is an important temple of the Shingon sect of Japanese Buddhism and a designated world heritage site. The large temple complex stands southeast of central Kyoto and includes an entire mountainside (Click picture to read more)',
	},
	{
		name: 'Gion District',
		image: './images/Gion-District.png',
		about:
			'Gion is Kyoto’s geisha district, with hostesses in colorful kimonos often sighted on the wooden Tatsumi Bridge, or amid upscale Japanese restaurants and boutiques on Hanamikoji Street (Click picture to read more)',
	},
	{
		name: 'Ginzan Onsen',
		image: './images/Ginzan-Onsen.png',
		about:
			'Ginzan Onsen (Silver Mountain Hot Spring) is a secluded hot spring town nestled in the mountains of Yamagata Prefecture (Click picture to read more)',
	},
	{
		name: 'Hakone',
		image: './images/Hakone.png',
		about:
			'Hakone is part of the Fuji-Hakone-Izu National Park, less than one hundred kilometers from Tokyo. Famous for hot springs, natural beauty and the view across Lake Ashinoko of nearby Mount Fuji (Click picture to read more)',
	},
	{
		name: 'Hiroshima Castle',
		image: './images/Hiroshima.png',
		about:
			'Hiroshima Castle also called the Carp Castle, is a good example of a castle built on a plain in the center of a city as opposed to hilltop and mountaintop castles (Click picture to read more)',
	},
	{
		name: 'Hitsujiyama Park ',
		image: './images/Hitsujiyama-Park.png',
		about:
			'Hitsujiyama Park is a park in Chichibu, known for its beautiful moss pink fields that typically come into bloom around late April to early May and attract droves of visitors (Click picture to read more)',
	},
	{
		name: 'Kamakura',
		image: './images/Kamakura.png',
		about:
			'Kamakura is a small city and a very popular tourist destination. Sometimes called the Kyoto of Eastern Japan, Kamakura offers numerous temples, shrines and other historical monuments (Click picture to read more)',
	},
	{
		name: 'Maruyama Park',
		image: './images/Maruyama-Park.png',
		about:
			'In the first half of April, when the cherry trees are in full bloom, the park becomes Kyoto’s most popular and most crowded spot for cherry blossom viewing parties (Click picture to read more)',
	},
	{
		name: 'Nagoya Castle',
		image: './images/Nagoya-Castle.png',
		about:
			'Nagoya Castle was built in the beginning of the Edo Period as the seat of one of the three branches of the ruling Tokugawa family, the Owari branch (Click picture to read more)',
	},
	{
		name: 'Arashiyama',
		image: './images/Arashiyama.png',
		about:
			'Arashiyama becomes most attractive (and busy) around early April and the second half of November when the cherry blossom and fall color seasons usually peak (Click picture to read more)',
	},
	{
		name: 'Daigoji',
		image: './images/Daigoji.png',
		about:
			'Daigoji is an important temple of the Shingon sect of Japanese Buddhism and a designated world heritage site. The large temple complex stands southeast of central Kyoto and includes an entire mountainside (Click picture to read more)',
	},
	{
		name: 'Gion District',
		image: './images/Gion-District.png',
		about:
			'Gion is Kyoto’s geisha district, with hostesses in colorful kimonos often sighted on the wooden Tatsumi Bridge, or amid upscale Japanese restaurants and boutiques on Hanamikoji Street (Click picture to read more)',
	},
	{
		name: 'Ginzan Onsen',
		image: './images/Ginzan-Onsen.png',
		about:
			'Ginzan Onsen (Silver Mountain Hot Spring) is a secluded hot spring town nestled in the mountains of Yamagata Prefecture (Click picture to read more)',
	},
	{
		name: 'Hakone',
		image: './images/Hakone.png',
		about:
			'Hakone is part of the Fuji-Hakone-Izu National Park, less than one hundred kilometers from Tokyo. Famous for hot springs, natural beauty and the view across Lake Ashinoko of nearby Mount Fuji (Click picture to read more)',
	},
	{
		name: 'Hiroshima Castle',
		image: './images/Hiroshima.png',
		about:
			'Hiroshima Castle also called the Carp Castle, is a good example of a castle built on a plain in the center of a city as opposed to hilltop and mountaintop castles (Click picture to read more)',
	},
	{
		name: 'Hitsujiyama Park ',
		image: './images/Hitsujiyama-Park.png',
		about:
			'Hitsujiyama Park is a park in Chichibu, known for its beautiful moss pink fields that typically come into bloom around late April to early May and attract droves of visitors (Click picture to read more)',
	},
	{
		name: 'Kamakura',
		image: './images/Kamakura.png',
		about:
			'Kamakura is a small city and a very popular tourist destination. Sometimes called the Kyoto of Eastern Japan, Kamakura offers numerous temples, shrines and other historical monuments (Click picture to read more)',
	},
	{
		name: 'Maruyama Park',
		image: './images/Maruyama-Park.png',
		about:
			'In the first half of April, when the cherry trees are in full bloom, the park becomes Kyoto’s most popular and most crowded spot for cherry blossom viewing parties (Click picture to read more)',
	},
	{
		name: 'Nagoya Castle',
		image: './images/Nagoya-Castle.png',
		about:
			'Nagoya Castle was built in the beginning of the Edo Period as the seat of one of the three branches of the ruling Tokugawa family, the Owari branch (Click picture to read more)',
	},
];
const extraDeck = [
	{
		name: 'Okinawa',
		image: './images/Okinawa.png',
		about:
			'The Okinawa islands are located about two and a half hours from Tokyo by plane. While technically part of Japan, the isles may as well be another country! Historically, Okinawa was actually its own entity known as the Ryukyu kingdom. Because of this legacy, Okinawa has a very different history to the rest of Japan which is immediately apparent in the local cultural motifs.Today Okinawa is best known as a tropical retreat by many Japanese. In addition to lazily relaxing by the beach, there are a lot of other fun things to do',
	},
	{
		name: 'Sapporo',
		image: './images/Sapporo.png',
		about:
			'Outdoor enthusiasts will find that Sapporo is a great base from which to head out and explore. Additionally, due to its location on Japan’s northernmost island, Sapporo is a great escape from the oppressive summer humidity. Good news for those feeling a little too hot.That said, the city is probably most famous for its annual snow festival. Every year artists fashion large snow sculptures with some measuring more than 25 meters wide and 15 meters high! It’s definitely worth a visit and if you’re in Japan during February you have snow excuse not to check it out!',
	},
	{
		name: 'Nagano',
		image: './images/Nagano.png',
		about:
			'In addition to the beautiful scenery, the city of Nagano is home to a lot of hidden gems. From the 1998 winter Olympic facilities to a Ninja village for kids, there’s something for everyone here. Within the bounds of the prefecture you’ll also find the Shiga Kogen ski resort and the famous onsen-bathing snow monkeys of Jigokudani.Be sure to also consider visiting Matsumoto city. Matsumoto is also a great starting point for those looking to go experience the Tateyama Kurobe Alpine Route and its massive snow walls',
	},
	{
		name: 'Kyushu',
		image: './images/Kyushu.png',
		about:
			'Kyushu is the southernmost of Japan’s four major islands. The island is divided into seven prefectures, each with their own unique appeal. From the vibrant and energetic city of Fukuoka in the north, through the traditional ryokan and hot springs of Oita, past historic Kumamoto, all the way down to natural paradise Kagoshima in the south, this volcanic island really does have something for everyone',
	},
];

//create variable to target the game board
const gameBoard = document.querySelector('.game-board');
//create variable to target the play button
const playBtn = document.querySelector('.play');
//create variable to target all images in the game board
const cardsBoard = document.getElementsByTagName('img');
//create a variable to target the big image
const bigImage = document.getElementById('big-image');
//create variable to target the h2 inside paragraph
const nameOfPlace = document.querySelector('.about-place');
//create a variable to target the About paragraph
const placeAbout = document.querySelector('.about');
//create two arrays for holding temp values for checking match
//create variable with empty array for checking cards in play
let cardInPlay = [];
//create variable with empty array for checking winning game
let matchedCard = [];
//create variable to target score board and a variable to hold score
const scoreBoard = document.querySelector('.score');
//set initial score
let score = 0;
//create variable to target reset score button
const resetBtn = document.querySelector('.reset');
//create variable to target the restart button
const restartBtn = document.querySelector('.restart');
//create variable to target the winning message
const winningMessage = document.getElementById('modal');
// create a variable to target the search button
const searchBtn = document.querySelector('.search-button');
// create variable to target the value input
const addInput = document.querySelector('input');
// create variable to target button that let users add more cards
const addBtn = document.querySelector('.add');
//create a counter variable for counting added card
let addCard = 0;
//creat a variable to target the modal close button
let closeBtn = document.getElementById('close');
// create a variable to target the modal that show image
let modalImageView = document.getElementById('picture-modal');
let modalImage = document.createElement('img');
//create a variable to target the close button
let returnBtn = document.getElementById('return');

//event handler to target let's play button
playBtn.addEventListener('click', letsPlay);
//event handler to target individual card when card is clicked
gameBoard.addEventListener('click', flipCard);
//event handler to handle reset score function
resetBtn.addEventListener('click', resetScore);
//add event handler for the restart button
restartBtn.addEventListener('click', restartGame);
//add event handler for adding favorite button
searchBtn.addEventListener('click', searchResult);
//add event handler for handling adding more card function
addBtn.addEventListener('click', addMoreCards);
//add event handler to handle closing winning game message
closeBtn.addEventListener('click', closeModal);
//add event handler to handle modal image
bigImage.addEventListener('click', imageModal);
// add event listener for closing modal image
returnBtn.addEventListener('click', closeModalImage);

//Game function
//start game with board full of images of cards
function gameStart() {
	for (let i = 0; i < deck.length; i++) {
		let cardFront = document.createElement('img');
		cardFront.setAttribute('class', 'box');
		cardFront.setAttribute('data-number', i);
		cardFront.setAttribute('src', deck[i].image);
		gameBoard.appendChild(cardFront);
	}
}
gameStart();

function letsPlay() {
	clearBoard();
	for (let i = 0; i < deck.length; i++) {
		let backCard = document.createElement('img');
		backCard.setAttribute('class', 'box');
		backCard.setAttribute('data-number', i);
		//console.log(backCard);
		backCard.setAttribute('src', './images/card-back.png');
		gameBoard.appendChild(backCard);
	}
	shuffleDec();
}

//clear the board game
function clearBoard() {
	let existingCards = gameBoard.firstElementChild;
	while (existingCards) {
		gameBoard.removeChild(existingCards);
		existingCards = gameBoard.firstElementChild;
	}
}

function flipCard(event) {
	let userInput = parseInt(event.target.dataset.number);
	if (event.target.classList.contains('box')) {
		nameOfPlace.innerText = deck[userInput].name;
		placeAbout.innerText = deck[userInput].about;
		nameOfPlace.appendChild(placeAbout);
		bigImage.setAttribute('src', deck[userInput].image);
		let currentCardImage = event.target.getAttribute('src');
		//if card is back then flip to front
		if (currentCardImage === './images/card-back.png') {
			event.target.setAttribute('src', deck[userInput].image);
			let currentCardName = deck[userInput].name;
			//push card's image to card-in-play array to check matching pair
			cardInPlay.push(currentCardName);
		} else {
			return;
		}
	}
	checkIfMatch(userInput); // check for matching pair
	checkGame(); // check if game is active
}
//game auto start after 3 minutes
setTimeout(letsPlay, 180000);

//function to check if the pair is matched

function checkIfMatch(userInput) {
	if (cardInPlay.length === 2) {
		if (cardInPlay[0] === cardInPlay[1]) {
			//if pair is matched, push them to the matched-card array, reset card-in-play array
			matchedCard.push(cardInPlay[0], cardInPlay[1]);
			cardInPlay = [];
			score += 10;
			scoreBoard.innerText = 'SCORE: ' + score;
		} else if (cardInPlay[0] !== cardInPlay[1]) {
			// if pair is not match, remove the last clicked item from card-in-play array
			cardInPlay.pop();
			score -= 1;
			scoreBoard.innerText = 'SCORE: ' + score;
			// if pair is not matched flip the last clicked card back down after 2 seconds
			setTimeout(function () {
				cardsBoard[userInput + 1].setAttribute('src', './images/card-back.png');
			}, 600);
		}
	}
}

function resetScore() {
	scoreBoard.innerText = 'SCORE: 0000';
}

//reload page to restart game
function restartGame() {
	window.location.reload();
}

//add function to check if the game is over

function checkGame() {
	if (matchedCard.length === 20) {
		winningMessage.style.display = 'block';
	} else {
		return;
	}
}
// add function to shuffle cards when user click play button
function shuffleDec() {
	for (let i = deck.length - 1; i >= 0; i--) {
		let j = Math.floor(Math.random() * (i + 1));
		let randomizedCards = deck[i];
		deck[i] = deck[j];
		deck[j] = randomizedCards;
	}
	return deck;
}

//add function to handle search event
function searchResult() {
	let inputValue = addInput.value;
	for (let i = 0; i < deck.length; i++)
		if (inputValue == deck[i].name) {
			nameOfPlace.innerText = deck[i].name;
			placeAbout.innerText = deck[i].about;
			nameOfPlace.appendChild(placeAbout);
			bigImage.setAttribute('src', deck[i].image);
		}
}

function addMoreCards() {
	if (addCard < extraDeck.length) {
		let newCard = document.createElement('img');
		newCard.setAttribute('src', extraDeck[addCard].image);
		newCard.classList.add('box');
		gameBoard.appendChild(newCard);
		nameOfPlace.innerText = extraDeck[addCard].name;
		placeAbout.innerText = extraDeck[addCard].about;
		nameOfPlace.appendChild(placeAbout);
		bigImage.setAttribute('src', extraDeck[addCard].image);
		addCard++;
		return addCard;
	} else if (addCard > extraDeck.length) {
		return;
	}
}

function imageModal() {
	if (bigImage.getAttribute('src') === './images/card-back.png') {
		return;
	} else {
		modalImageSource = bigImage.getAttribute('src');
		modalImage.setAttribute('src', modalImageSource);
		modalImage.style.width = '450px';
		modalImage.style.height = '675px';
		modalImageView.appendChild(modalImage);
		modalImageView.style.display = 'block';
	}
}

function closeModal() {
	winningMessage.style.display = 'none';
}

function closeModalImage() {
	modalImageView.style.display = 'none';
	modalImageView.removeChild(modalImage);
}
